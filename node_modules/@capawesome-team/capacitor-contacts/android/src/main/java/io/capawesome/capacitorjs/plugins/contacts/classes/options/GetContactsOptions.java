package io.capawesome.capacitorjs.plugins.contacts.classes.options;

import androidx.annotation.NonNull;
import com.getcapacitor.PluginCall;
import io.capawesome.capacitorjs.plugins.contacts.ContactsHelper;
import io.capawesome.capacitorjs.plugins.contacts.enums.ContactField;
import java.util.List;

public class GetContactsOptions {

    @NonNull
    private final List<ContactField> fields;

    @NonNull
    private final Integer limit;

    @NonNull
    private final Integer offset;

    public GetContactsOptions(@NonNull PluginCall call) throws Exception {
        this.fields = ContactsHelper.getFieldsFromCall(call);
        this.limit = GetContactsOptions.getLimitFromCall(call);
        this.offset = GetContactsOptions.getOffsetFromCall(call);
    }

    @NonNull
    public List<ContactField> getFields() {
        return fields;
    }

    @NonNull
    public Integer getLimit() {
        return limit;
    }

    @NonNull
    public Integer getOffset() {
        return offset;
    }

    @NonNull
    private static Integer getLimitFromCall(@NonNull PluginCall call) {
        Integer limit = call.getInt("limit");
        if (limit == null) {
            return 1000;
        }
        return limit;
    }

    @NonNull
    private static Integer getOffsetFromCall(@NonNull PluginCall call) {
        Integer offset = call.getInt("offset");
        if (offset == null) {
            return 0;
        }
        return offset;
    }
}
