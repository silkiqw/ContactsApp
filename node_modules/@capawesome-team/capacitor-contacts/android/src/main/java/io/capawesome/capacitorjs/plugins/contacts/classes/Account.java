package io.capawesome.capacitorjs.plugins.contacts.classes;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import com.getcapacitor.JSObject;
import io.capawesome.capacitorjs.plugins.contacts.ContactsPlugin;

public class Account {

    @Nullable
    public final String name;

    @Nullable
    public final String type;

    public Account(@Nullable String name, @Nullable String type) {
        this.name = name;
        this.type = type;
    }

    public Account(@NonNull JSObject call) throws Exception {
        this.name = getNameFromJSObject(call);
        this.type = getTypeFromJSObject(call);
    }

    @NonNull
    private String getNameFromJSObject(@NonNull JSObject data) throws Exception {
        String name = data.getString("name");
        if (name == null) {
            throw new Exception(ContactsPlugin.ERROR_ACCOUNT_NAME_MISSING);
        }
        return name;
    }

    @NonNull
    private String getTypeFromJSObject(@NonNull JSObject data) throws Exception {
        String type = data.getString("type");
        if (type == null) {
            throw new Exception(ContactsPlugin.ERROR_ACCOUNT_TYPE_MISSING);
        }
        return type;
    }
}
