import Capacitor

@objc public class GetContactsOptions: NSObject {
    var fields: [ContactField] = [.birthday, .emailAddresses, .familyName, .givenName, .jobTitle, .middleName, .namePrefix, .nameSuffix, .organizationName, .phoneNumbers, .postalAddresses, .urlAddresses]
    var includeId = true
    var includeGroupIds = false
    var limit = 1000
    var offset = 0

    init(_ call: CAPPluginCall) {
        if let fields = call.getArray("fields") as? [String] {
            self.fields = fields.compactMap { ContactField(rawValue: $0) }
            self.includeId = fields.contains("id")
            self.includeGroupIds = fields.contains("groupIds")
        }
        if let limit = call.getInt("limit") {
            self.limit = limit
        }
        if let offset = call.getInt("offset") {
            self.offset = offset
        }
    }
}
