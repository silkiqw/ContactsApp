import Foundation
import Capacitor

@objc public class UpdateContactByIdOptions: NSObject {
    let contact: Contact
    let id: String

    init(_ call: CAPPluginCall) throws {
        self.contact = try UpdateContactByIdOptions.getContactFromCall(call)
        self.id = try UpdateContactByIdOptions.getIdFromCall(call)
    }

    private static func getContactFromCall(_ call: CAPPluginCall) throws -> Contact {
        guard let contact = call.getObject("contact") else {
            throw CustomError.contactMissing
        }
        return try Contact(contact)
    }

    private static func getIdFromCall(_ call: CAPPluginCall) throws -> String {
        guard let id = call.getString("id") else {
            throw CustomError.idMissing
        }
        return id
    }
}
